<!DOCTYPE html>
<html lang="zh-CN">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width,initial-scale=1.0">
        <title>县长模拟器</title>
        <style>
            body { margin: 0; padding: 0; background: #000; overflow: hidden; }
            #layaCanvas { display: block; }
            #loading { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #000; color: white; display: flex; justify-content: center; align-items: center; }
        </style>
    </head>
    <body>
        <div id="loading">加载游戏中...</div>
        <canvas id="layaCanvas"></canvas>

        <!-- 先加载 Laya 库 -->
        <script src="https://cdn.jsdelivr.net/npm/layabox@2.13.0/laya.core.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/layabox@2.13.0/laya.webgl.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/layabox@2.13.0/laya.filter.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/layabox@2.13.0/laya.particle.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/layabox@2.13.0/laya.ui.min.js"></script>

        <script>
            // 确保 Laya 完全加载后再加载游戏脚本
            function loadGame() {
                if (window.Laya) {
                    console.log('Laya 加载完成，开始加载游戏');
                    const script = document.createElement('script');
                    script.type = 'module';
                    script.crossOrigin = 'anonymous';
                    script.src = './assets/index-A12UBgQ1.js';
                    script.onload = function() {
                        console.log('游戏脚本加载成功');
                        document.getElementById('loading').style.display = 'none';
                    };
                    script.onerror = function(e) {
                        console.error('游戏脚本加载失败:', e);
                        document.getElementById('loading').innerText = '加载失败，请查看控制台';
                    };
                    document.head.appendChild(script);
                } else {
                    // 如果 Laya 还没加载完，稍等再试
                    setTimeout(loadGame, 100);
                }
            }

            // 开始加载流程
            loadGame();
        </script>
    </body>
</html>
