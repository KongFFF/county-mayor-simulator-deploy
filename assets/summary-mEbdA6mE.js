var u=n=>{throw TypeError(n)};var f=(n,r,e)=>r.has(n)||u("Cannot "+e);var d=(n,r,e)=>(f(n,r,"read from private field"),e?e.call(n):r.get(n)),g=(n,r,e)=>r.has(n)?u("Cannot add the same private member more than once"):r instanceof WeakSet?r.add(n):r.set(n,e),c=(n,r,e,i)=>(f(n,r,"write to private field"),i?i.call(n,e):r.set(n,e),e);var l,m;class T extends ui.view.DefaultTheme.SummaryUI{constructor(){super();g(this,l);g(this,m);this.listSummary.renderHandler=Laya.Handler.create(this,this.renderSummary,null,!1),this.listSelectedTalents.renderHandler=Laya.Handler.create(this,this.renderTalent,null,!1),this.btnAgain.on(Laya.Event.CLICK,this,this.onAgain)}onAgain(){core.talentExtend(d(this,l)),core.times++,$ui.switchView(UI.pages.MAIN)}init({talents:e,enableExtend:i}){const{summary:t,lastExtendTalent:a}=core;c(this,m,i),this.listSummary.array=[[core.PropertyTypes.HINT,$lang.UI_Property_Intelligence],[core.PropertyTypes.HSTR,$lang.UI_Property_Strength],[core.PropertyTypes.HMNY,$lang.UI_Property_Money],[core.PropertyTypes.HSPR,$lang.UI_Property_Spirit],[core.PropertyTypes.HAGE,$lang.UI_Final_Age],[core.PropertyTypes.SUM,$lang.UI_Total_Judge]].map(([o,h])=>{const s=t[o];return{label:`${h}${$lang.UI_Colon} ${s.value} ${$lang[s.judge]}`,grade:s.grade}}),e.sort(({id:o,grade:h},{id:s,grade:y})=>o==a?-1:s==a?1:y-h),d(this,m)?c(this,l,null):c(this,l,a),this.listSelectedTalents.array=e}renderSummary(e){const{label:i,grade:t}=e.dataSource;e.label=i,$_.deepMapSet(e,$ui.common.summary[t])}renderTalent(e){const i=e.dataSource;e.removeChildren(),e.height=140;const t=new Laya.Label;t.name="labName",t.width=e.width,t.height=50,t.y=25,t.align="center",t.valign="middle",t.font="SimHei",t.fontSize=46,t.color="#ffffff",t.text=i.name,e.addChild(t);const a=new Laya.Label;a.name="labDesc",a.width=e.width,a.height=40,a.y=80,a.align="center",a.valign="middle",a.font="SimHei",a.fontSize=38,a.color="#ffffff",a.text=`（${i.description}）`,e.addChild(a),Laya.timer.frameOnce(2,this,()=>{const s=e.width,y=t.contextWidth||t.width,p=a.contextWidth||a.width;t.x=Math.max(0,(s-y)/2),a.x=Math.max(0,(s-p)/2)});const o=$ui.common.card[i.grade];$_.deepMapSet(e,i.id==d(this,l)?o.selected:o.normal);const h=e.getChildByName("blank");h&&(h.pause=i.id!=d(this,l)),e.off(Laya.Event.CLICK,this,this.onSelectTalent),e.on(Laya.Event.CLICK,this,this.onSelectTalent,[i.id]),console.log("✅ 总结页面天赋样式统一完成")}onSelectTalent(e){if(!d(this,m))return $$event("message",["M_DisableExtendTalent"]);e==d(this,l)?c(this,l,null):c(this,l,e),this.listSelectedTalents.refresh()}}l=new WeakMap,m=new WeakMap;export{T as default};
